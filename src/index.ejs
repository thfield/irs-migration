<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title>irs-migration</title>
	<script src="https://d3js.org/d3.v4.min.js"></script>
	<script src="https://d3js.org/d3-queue.v3.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/d3-legend/2.24.0/d3-legend.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/topojson/3.0.2/topojson.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/dimple/2.3.0/dimple.latest.min.js"></script>

</head>
<body>
	<div id="container">
		<div id="sidebar">
			<div class="selector-control">
				<label for="year-selector">Year: </label><span id="selected-year"></span>
				<div>
					<input type="range" id="year-selector" min="0" max="1" value="0" step="1">
					<br>
					<span style="float:left;">04-05</span><span style="float:right;">14-15</span>
				</div>
			</div>
			<br>
			<div class="selector-control">
				<label for="direction">Direction: </label> <br>
				<select name="direction" id="direction">
					<option value="in" selected>Immigration</option>
					<option value="out">Emigration</option>
				</select>
			</div>
			<div class="selector-control">
				<label for="stat">Statistic:</label><br>
				<select name="stat" id="stat">
					<option value="n1" selected>Number of Returns</option>
					<option value="n2">Number of Exemptions</option>
					<option value="agi">Total Adjusted Gross Income</option>
					<option value="meanAgi">Mean Adjusted Gross Income</option>
				</select>
			</div>
		</div>
		<div id="main">
			<div class="about">
				<h3>What is this?</h3>
				<p>The IRS publishes data on migration patterns within the US based on changes in taxpayers' return addresses.  This is an ongoing project to visualize and explore that data, with special attention on San Francisco.  Eventually, the project might be modified to explore any county in the US.</p>
				<p>The data contains the aggregate number of returns that are filed within a particular county one year and a particular county the next. In this way it is possible to track the migration of taxpayers between specific counties.  In this project, I concentrate on migration patterns into San Francisco.</p>
				<p>This map currently shows the counties where taxpayers lived in 2014 before moving to San Francisco in 2015, shaded by the number of returns filed.  The more people, the darker the county is shaded.</p>
				<p>Use the controls on the left to change the displayed statistic available in the data:
				<br>Year: The years between which a move took place.
				<br>Direction: Here, immigration means migration into San Francisco and emigration means migration out of San Francisco
				<br>Statistic:
				<ul>
					<li>Number of Returns filed, which approximates the number of households that migrated</li>
					<li>Number of Personal Exemptions claimed, which approximates the number of individuals</li>
					<li>Total Adjusted Gross Income</li>
					<li>Mean AGI, calculated by dividing Total AGI by Number of Returns.</li>
				</ul>
				</p>
			</div>


			<div id="map">
				<svg width="960" height="600" fill="none" stroke="#000" stroke-linejoin="round" stroke-linecap="round"></svg>
				<div id="tooltip" class="tooltip"></div>
			</div>


			<div id="rank-county">
				<span>Top Counties</span>
				<br>
			</div>
			<div id="rank-county-outofstate">
				<span>Top Counties (out of state)</span>
				<br>
			</div>

			<div id="rank-state">
				<span>Top States (out of state)</span>
				<br>
			</div>

			<div id="annual">
				<span>Destination State</span>
				<select id="stateyear"></select>
				<br>
			</div>

		</div>
	</div>


</body>

</html>